{% extends 'base.html' %}

{% load static %}
{% load wt_extras %}

{% block title %}{{ block.super }} - User Profile {% endblock %}

{% block css %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'new_question.css' %}">
{% endblock %}


{% block content %}
<h2>User Profile - 

{% firstof profile_user.get_full_name profile_user.username|title %}

</h2>

<div class="form-horizontal col-md-6 col-md-offset-3">
          
   <div class="form-group">
     <label for="goal" class="col-sm-3 control-label">Username:</label>
     <div class="col-sm-9">
       <p class="help-block">{{ profile_user.username }}</p>
     </div>
   </div>

   <div class="form-group">
     <label for="goal" class="col-sm-3 control-label">Full name:</label>
     <div class="col-sm-9">
       <p class="help-block">{{ profile_user.get_full_name }}</p>
     </div>
   </div>

   <div class="form-group">
     <label for="goal" class="col-sm-3 control-label">Email:</label>
     <div class="col-sm-9">
       <p class="help-block">{{ profile_user.email }}</p>
     </div>
   </div>

</div>

<form class="form-horizontal col-md-6 col-md-offset-3" method="post">

    {% csrf_token %}

    {% if any_errors.old_pass_flag %}
        <script type="text/javascript">
            $.notify.defaults({ globalPosition: "top center" });
            $.notify("Incorrect current password", "error");
        </script>
    {% endif %}

    {% if any_errors.new_pass_flag %}
        <script type="text/javascript">
            $.notify.defaults({ globalPosition: "top center" });
            $.notify("New passwords do not macth", "error");
        </script>
    {% endif %}
    
    {% if update_success.flag %}
        <script type="text/javascript">
            $.notify.defaults({ globalPosition: "top center" });
            $.notify("Password updated successfully", "success");
        </script>
    {% endif %}

	<div class="New Patient Information">
        <div class="form-group">
        <label for="id_{{form.old_password.name}}" class="col-sm-3 control-label">Current Password:</label>
        <div class="col-sm-9">
        {{ form.old_password }}
        {{ form.old_password.errors }}
        </div>
        </div>
	</div>

	<div class="New Patient Information">
        <div class="form-group">
        <label for="id_{{form.new_password.name}}" class="col-sm-3 control-label">New Password:</label>
        <div class="col-sm-9">
        {{ form.new_password }}
        {{ form.new_password.errors }}
        </div>
        </div>
	</div>

	<div class="New Patient Information">
        <div class="form-group">
        <label for="id_{{form.confirm_new_password.name}}" class="col-sm-3 control-label">Confirm New Password:</label>
        <div class="col-sm-9">
        {{ form.confirm_new_password }}
        {{ form.confirm_new_password.errors }}
        </div>
        </div>
	</div>

	<div class="submit text-center">
	<input type="submit" class="btn btn-info btn-lg" value="Update password">
	</div>


</form>

{% endblock %}
